import streamlit as st
import numpy as np
import matplotlib.pyplot as plt

# Streamlit í˜ì´ì§€ ì„¤ì •
st.set_page_config(
    page_title="ìœ ë¦¬í•¨ìˆ˜ ê·¸ë˜í”„ êµê³¼ì„œ (y=k/x)",
    layout="wide",
    initial_sidebar_state="expanded"
)

st.title("ğŸ“š ìœ ë¦¬í•¨ìˆ˜ ê·¸ë˜í”„ êµê³¼ì„œ (ê³ ë“±í•™êµ ìˆ˜í•™)")
st.header("1. ìœ ë¦¬í•¨ìˆ˜ë€ ë¬´ì—‡ì¸ê°€?")

# ìœ ë¦¬í•¨ìˆ˜ì˜ ì •ì˜
st.markdown("""
**ìœ ë¦¬í•¨ìˆ˜(Rational Function)**ëŠ” í•¨ìˆ˜ $y=f(x)$ì—ì„œ $f(x)$ê°€ ë‘ ë‹¤í•­ì‹ $P(x)$, $Q(x)$ì— ëŒ€í•˜ì—¬ $\mathbf{f(x) = \frac{P(x)}{Q(x)}}$ ($Q(x) \neq 0$) ê¼´ë¡œ ë‚˜íƒ€ë‚´ì–´ì§€ëŠ” í•¨ìˆ˜ë¥¼ ë§í•©ë‹ˆë‹¤.
""")
# ìœ ë¦¬í•¨ìˆ˜ì˜ ì˜ˆì‹œ
st.latex(r"y = \frac{x+1}{x^2-4}, \quad y = \frac{3}{x}, \quad y = 2x-1 \quad (\text{ë‹¤í•­í•¨ìˆ˜ë„ ë¶„ëª¨ê°€ 1ì¸ ìœ ë¦¬í•¨ìˆ˜ì…ë‹ˆë‹¤.})")

st.header("2. ìœ ë¦¬í•¨ìˆ˜ì˜ ì •ì˜ì—­")

# ì •ì˜ì—­ ì„¤ëª…
st.markdown("""
ìœ ë¦¬í•¨ìˆ˜ $f(x) = \frac{P(x)}{Q(x)}$ì˜ **ì •ì˜ì—­**ì€ ë¶„ëª¨ $Q(x)$ë¥¼ 0ìœ¼ë¡œ ë§Œë“¤ì§€ ì•ŠëŠ” ì‹¤ìˆ˜ ì „ì²´ì˜ ì§‘í•©ì…ë‹ˆë‹¤.
ì¦‰, $\mathbf{\{ x \mid Q(x) \neq 0, x \text{ëŠ” ì‹¤ìˆ˜} \}}$ ì…ë‹ˆë‹¤.
""")
st.info(r"$\mathbf{y = \frac{k}{x}}$ ($k \neq 0$)ì˜ ê²½ìš°, ë¶„ëª¨ê°€ $x$ì´ë¯€ë¡œ $\mathbf{x \neq 0}$ì¸ ëª¨ë“  ì‹¤ìˆ˜ê°€ ì •ì˜ì—­ì…ë‹ˆë‹¤.")

st.markdown("---")

## ğŸ“Š $y = \frac{k}{x}$ ê·¸ë˜í”„ ì‚´í´ë³´ê¸°

st.header("3. ê¸°ë³¸í˜• ìœ ë¦¬í•¨ìˆ˜ $y = \frac{k}{x}$ ì˜ ê·¸ë˜í”„")

# k ê°’ ì¡°ì •ì„ ìœ„í•œ ìŠ¬ë¼ì´ë”
st.sidebar.title("â­ ê·¸ë˜í”„ ë§¤ê°œë³€ìˆ˜ ì„¤ì •")
k_value = st.sidebar.slider(
    "ìƒìˆ˜ k ê°’ ì¡°ì • ($k \neq 0$)",
    min_value=-5.0,
    max_value=5.0,
    value=1.0,
    step=0.1,
    format="%.1f"
)

# kê°€ 0ì¸ ê²½ìš° ì²˜ë¦¬ (ìœ ë¦¬í•¨ìˆ˜ê°€ ì•„ë‹ˆë¯€ë¡œ)
if abs(k_value) < 0.1: # 0ì— ê°€ê¹Œìš´ ê°’ë„ 0ìœ¼ë¡œ ê°„ì£¼
    st.warning("këŠ” 0ì´ ì•„ë‹ˆì–´ì•¼ í•©ë‹ˆë‹¤. k=0ì´ë©´ $y=0$ì´ ë˜ì–´ ìœ ë¦¬í•¨ìˆ˜(ë¶„ìˆ˜í•¨ìˆ˜)ê°€ ì•„ë‹Œ ìƒìˆ˜í•¨ìˆ˜ê°€ ë©ë‹ˆë‹¤.")
    
    # ê·¸ë˜í”„ë¥¼ ê·¸ë¦¬ê¸° ìœ„í•´ 0ì— ê°€ê¹Œìš´ ê°’ìœ¼ë¡œ ëŒ€ì²´ (ë§¤ìš° ì‘ì€ ì–‘ìˆ˜)
    k_plot = 0.001 
    st.sidebar.markdown(f"**$\mathbf{{k}}$ ê°’**: $\mathbf{{k\_value:.1f}}$ (ê·¸ë˜í”„ëŠ” $\mathbf{{k={k_plot}}}$ë¡œ í‘œì‹œ)")
else:
    k_plot = k_value
    st.sidebar.markdown(f"**$\mathbf{{k}}$ ê°’**: $\mathbf{{k\_value:.1f}}$")

# ê·¸ë˜í”„ ìˆ˜ì‹ í‘œì‹œ
st.latex(f"y = \\frac{{ {k_plot:.1f} }}{{x}} \quad (k = {k_value:.1f})")

# ê·¸ë˜í”„ ê·¸ë¦¬ê¸°
fig, ax = plt.subplots(figsize=(8, 8))
# x_rangeë¥¼ ì ê·¼ì„  ê·¼ì²˜ë¥¼ í”¼í•´ì„œ ì •ì˜
x1 = np.linspace(-8, -0.1, 100) # ìŒì˜ ë¬´í•œëŒ€ì—ì„œ 0 ê·¼ì²˜ê¹Œì§€
x2 = np.linspace(0.1, 8, 100)   # 0 ê·¼ì²˜ì—ì„œ ì–‘ì˜ ë¬´í•œëŒ€ê¹Œì§€

# ê·¸ë˜í”„ ê·¸ë¦¬ê¸°
ax.plot(x1, k_plot / x1, color='blue', label=r'$y = k/x$')
ax.plot(x2, k_plot / x2, color='blue')

# ì ê·¼ì„  í‘œì‹œ (x=0, y=0)
ax.axhline(0, color='gray', linewidth=1, linestyle='--', label="ì ê·¼ì„ ") # xì¶• (y=0)
ax.axvline(0, color='gray', linewidth=1, linestyle='--') # yì¶• (x=0)

# ì¶• ë° ê²©ì ì„¤ì •
ax.set_xlim(-8, 8)
ax.set_ylim(-8, 8)
ax.set_xticks(np.arange(-8, 9, 2))
ax.set_yticks(np.arange(-8, 9, 2))
ax.grid(True, linestyle=':', alpha=0.6)
ax.set_aspect('equal', adjustable='box')
ax.set_xlabel("x")
ax.set_ylabel("y")
ax.set_title(f"$y = {k_plot:.1f} / x$ ê·¸ë˜í”„ ê°œí˜•")


st.pyplot(fig)

st.markdown("---")

### ğŸ’¡ ê·¸ë˜í”„ì˜ ì£¼ìš” íŠ¹ì§•

#### 1. ì§€ë‚˜ëŠ” ì‚¬ë¶„ë©´ (ê°œí˜•)
if k_value > 0.1:
    st.success(f"**k > 0 ({k_value:.1f} > 0)**: ê·¸ë˜í”„ëŠ” **ì œ1ì‚¬ë¶„ë©´**ê³¼ **ì œ3ì‚¬ë¶„ë©´**ì„ ì§€ë‚©ë‹ˆë‹¤.")
elif k_value < -0.1:
    st.error(f"**k < 0 ({k_value:.1f} < 0)**: ê·¸ë˜í”„ëŠ” **ì œ2ì‚¬ë¶„ë©´**ê³¼ **ì œ4ì‚¬ë¶„ë©´**ì„ ì§€ë‚©ë‹ˆë‹¤.")
else:
    st.warning("kê°€ 0ì— ë§¤ìš° ê°€ê¹ìŠµë‹ˆë‹¤. ì‹¤ì œ ê·¸ë˜í”„ëŠ” xì¶•(y=0)ê³¼ yì¶•(x=0)ì— í•œì—†ì´ ê°€ê¹Œì›Œì§‘ë‹ˆë‹¤.")

#### 2. ì ê·¼ì„  (Asymptotes)
st.markdown("""
ê·¸ë˜í”„ê°€ í•œì—†ì´ ê°€ê¹Œì›Œì§€ì§€ë§Œ ë§Œë‚˜ì§€ ì•ŠëŠ” ì§ì„ ì„ **ì ê·¼ì„ **ì´ë¼ê³  í•©ë‹ˆë‹¤.
$y = \frac{k}{x}$ ê·¸ë˜í”„ì˜ ì ê·¼ì„ ì€ ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤.
* **xì¶•** ($\mathbf{y=0}$)
* **yì¶•** ($\mathbf{x=0}$)
""")

#### 3. ëŒ€ì¹­ì„± (Symmetry)
st.markdown("""
$y = \frac{k}{x}$ ê·¸ë˜í”„ëŠ” ë‹¤ìŒ ì„¸ ê°€ì§€ì— ëŒ€í•´ ëŒ€ì¹­ì…ë‹ˆë‹¤.
* **ì›ì ** $(0, 0)$ì— ëŒ€í•˜ì—¬ **ì ëŒ€ì¹­**
* ë‘ ì§ì„  **$\mathbf{y=x}$** ë° **$\mathbf{y=-x}$**ì— ëŒ€í•˜ì—¬ **ì„ ëŒ€ì¹­**
""")

#### 4. $|k|$ì˜ ê°’ê³¼ ê·¸ë˜í”„ì˜ ê´€ê³„
abs_k = np.abs(k_value)
st.markdown(f"""
í˜„ì¬ $|k|$ì˜ ê°’ì€ $\mathbf{{abs_k:.1f}}$ì…ë‹ˆë‹¤.
* $|k|$ì˜ ê°’ì´ **ì»¤ì§ˆìˆ˜ë¡** (ìŠ¬ë¼ì´ë”ë¥¼ ì–‘ìª½ ëìœ¼ë¡œ ì›€ì§ì¼ìˆ˜ë¡), ê·¸ë˜í”„ì˜ ë‘ ê³¡ì„ ì€ **ì›ì ì—ì„œ ì ì  ë©€ì–´ì§‘ë‹ˆë‹¤**.
* $|k|$ì˜ ê°’ì´ **ì‘ì•„ì§ˆìˆ˜ë¡** (ìŠ¬ë¼ì´ë”ë¥¼ 0ì— ê°€ê¹Œì´ ì›€ì§ì¼ìˆ˜ë¡), ê·¸ë˜í”„ì˜ ë‘ ê³¡ì„ ì€ **ì›ì ì— ì ì  ê°€ê¹Œì›Œì§‘ë‹ˆë‹¤**.
""")

st.markdown("---")
st.subheader("ë§ˆë¬´ë¦¬ í•™ìŠµ")
st.success(r"ìœ ë¦¬í•¨ìˆ˜ $y=\frac{k}{x}$ì˜ íŠ¹ì§•ì„ kê°’ ë³€í™”ë¥¼ í†µí•´ ì˜ ì´í•´í–ˆìŠµë‹ˆë‹¤! $\mathbf{k \neq 0}$ì´ë¼ëŠ” ì¡°ê±´ê³¼ **ì ê·¼ì„ ** ë° **ëŒ€ì¹­ì„±**ì„ ê¸°ì–µí•˜ì„¸ìš”.")
